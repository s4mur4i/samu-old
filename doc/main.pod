=head1 NAME

    herring.pl -- Support automatisation script

=head1 DESCRIPTION

    This script is used as a wrapper script for automatisation task used by support.

    To get information about any sub module call any option with help. Documentation and information can be reached under the repective sub module help.

=head1 SYNOPSIS

    herring.pl [options] [function]

=head1 OPTIONS

=over

=item --help|-h

    Print the help page

=item --man|-m

    Print the man page with information about all modules

=item -v|-vv|-vvv

    Increase verbosity of printing

=item -v
    Print WARNING messages

=item -vv
    Print INFO messages

=item -vvv
    Print DEBUG information used at development or troubleshooting phase

=back

=head1 FUNCTIONS

=over

=item vm

    Access VM Entity functions

=item datastore

    Access Datastore functions

=item ticket

    Access ticket functions

=item kayako

    Access kayako functions

=item bugzilla

    Access bugzilla functions

=item admin

    Higher level commands for administering or maintenance of the Vcenter and environment

=back

=head1 SUBS

    List of defined functions, each can be called with it's own help and detailed information. Each sub has their own help defined.

=head1 VM

=head3 SYNOPSIS

    herring.pl vm [options] [function]

=head3 OPTIONS

=over

=item --help|-h

    Print the help page

=back

=head3 FUNCTIONS

=over

=item clone

    Sub used to provision vm guests from templates.

=item add

    Sub to add different hardwares to a guest

=item list

    Sub to list different hardwares of a guest

=item delete

    Sub to delete/remove different hardwares of a guest

=item change

    Sub to change settings of a guest

=item info

    Sub used to dump information about a vm

=back

=head1 VM_functions

=head2 VM_clone_function

=head3 SYNOPSIS

    herring.pl vm clone [options]

=head3 OPTIONS

=over

=back

=head2 VM_list_function

=head3 SYNOPSIS

    herring.pl vm list [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item network

    List network interfaces attached to a vm

=item cdrom

    List cdrom-s attached to a vm

=item disk

    List disk-s attached to a vm

=item snapshot

    List snapshots attached to a vm

=back

=head2 VM_add_function

=head3 SYNOPSIS

    herring.pl vm add [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item cdrom

    Add a cdrom drive to a vm

=item network

    Add a network interface to a vm

=item disk

    Add a thin provisioned hard disk to a vm

=item snapshot

    List snapshots attached to a vm

=back

=head2 VM_delete_function

=head3 SYNOPSIS

    herring.pl vm delete [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item cdrom

    Delete a cdrom drive to a vm

=item network

    Delete a network interface to a vm

=item disk

    Delete a hard disk from a vm

=item snapshot

    Delete a snapshot attached to a vm

=back

=head2 VM_change_function

=head3 SYNOPSIS

    herring.pl vm change [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item cdrom

    Change the backend iso to a cdrom drive

=item network

    Change the network connected to a network

=item altername

    Change the alternative name of a vm

=item snapshot

    Revert to snapshot attached to a vm

=item power

    Change the power state of a vm

=back

=head2 VM_info_function

=head3 SYNOPSIS

    herring.pl vm info [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item dumper

    This information is used for development purposes, It dumps all object information about vm to STDOUT

=item runtime

    Information about runtime environment

=back

=head1 TICKET

=head3 SYNOPSIS

    herring.pl ticket [options] [function]


=head3 OPTIONS

=over

=item --help|-h

    Print the help page

=back

=head3 FUNCTIONS

=over

=item list

    List all ticket on the ESXi, their owner, the kayako status currently, and if possible the Bugzilla status

=item info

    List all machines attached to a ticket, and their logon information

=item on

    Turn all machines on attached to a ticket

=item off

    Turn all machines off attached to a ticket

=back

=head1 TICKET_functions

=head2 TICKET_list_function

=head3 SYNOPSIS

    herring.pl ticket list [options]

=head3 OPTIONS

=over

=back

=head2 TICKET_info_function

=head3 SYNOPSIS

    herring.pl ticket info [options]

=head3 OPTIONS

=over

=back

=head2 TICKET_on_function

=head3 SYNOPSIS

    herring.pl ticket on [options]

=head3 OPTIONS

=over

=item --help|-h

    Print the help page

=back

=head2 TICKET_off_function

=head3 SYNOPSIS

    herring.pl ticket off [options]

=head3 OPTIONS

=over

=back

=head1 DATASTORE

=head3 SYNOPSIS

    herring.pl datastore [options] [function]

=head3 OPTIONS

=over

=back

=head3 FUNCTIONS

=over

=item list

    List datastores mounted on Vcenter

=item add

    Add a datastore to the Vcenter

=item delete

    Unmount and delete a datastore from the Vcenter

=item info

    Information about a datastore

=back

=head1 DATASTORE_functions

=head2 DATASTORE_list_function

=head3 SYNOPSIS

    herring.pl datastore list [options]

=head3 OPTIONS

=over

=back

=head2 DATASTORE_add_function

=head3 SYNOPSIS

    herring.pl datastore add [options]

=head3 OPTIONS

=over

=back

=head2 DATASTORE_delete_function

=head3 SYNOPSIS

    herring.pl datastore delete [options]

=head3 OPTIONS

=over

=back

=head2 DATASTORE_info_function

=head3 SYNOPSIS

    herring.pl datastore info [options]

=head3 OPTIONS

=over

=back

=head1 KAYAKO

=head3 SYNOPSIS

    herring.pl kayako [options] [functions]

=head3 OPTIONS

=over

=item -help|-h

    Print the help page

=back

=head3 FUNCTIONS

=over

=item TBD

    To Be Defined

=back

=head1 KAYAKO_functions

=head1 BUGZILLA

=head3 SYNOPSIS

    herring.pl bugzilla [options] [functions]

=head3 OPTIONS

=over

=item -help|-h

    Print the help page

=back

=head3 FUNCTIONS

=over

=item TBD

    To Be Defined

=back

=head1 BUGZILLA_functions

=head1 ADMIN

=head3 SYNOPSIS

    herring.pl admin [functions] [options]

=head3 OPTIONS

=over

=item --help|-h

    Print the help page

=back

=head3 FUNCTIONS

=over

=item cleanup

    Start the cleanup task to remove empty entites on the Vcenter

=item templates

    List template names and paths

=item test

    Test connection to VCenter. Prints the Server time

=back

=head1 ADMIN_functions

=head2 ADMIN_cleanup_function

=head3 SYNOPSIS

    herring.pl admin cleanup [options]

=head3 OPTIONS

=over

=back

=head2 ADMIN_templates_function

=head3 SYNOPSIS

    herring.pl admin templates [options]

=head3 OPTIONS

=over

=back

=head2 ADMIN_test_function

=head3 SYNOPSIS

    herring.pl admin test [options]

=head3 OPTIONS

=over

=back

=head1 Common_VI_options

=over

=item --config (variable VI_CONFIG)

    Location of the VI Perl configuration file

=item --credstore (variable VI_CREDSTORE)

    Name of the credential store file defaults to <HOME>/.vmware/credstore/vicredentials.xml on Linux and <APPDATA>/VMware/credstore/vicredentials.xml on Windows

=item --encoding (variable VI_ENCODING, default 'utf8')

    Encoding: utf8, cp936 (Simplified Chinese), iso-8859-1 (German), shiftjis (Japanese)

=item --help

    Display usage information for the script

=item --passthroughauth (variable VI_PASSTHROUGHAUTH)

    Attempt to use pass-through authentication

=item --passthroughauthpackage (variable VI_PASSTHROUGHAUTHPACKAGE, default 'Negotiate')

    Pass-through authentication negotiation package

=item --password (variable VI_PASSWORD)

    Password

=item --portnumber (variable VI_PORTNUMBER)

    Port used to connect to server

=item --protocol (variable VI_PROTOCOL, default 'https')

    Protocol used to connect to server

=item --savesessionfile (variable VI_SAVESESSIONFILE)

    File to save session ID/cookie to utilize

=item --server (variable VI_SERVER, default 'localhost')

    VI server to connect to. Required if url is not present

=item --servicepath (variable VI_SERVICEPATH, default '/sdk/webService')

    Service path used to connect to server

=item --sessionfile (variable VI_SESSIONFILE)

    File containing session ID/cookie to utilize

=item --url (variable VI_URL)

    VI SDK URL to connect to. Required if server is not present

=item --username (variable VI_USERNAME)

    Username

=item --verbose (variable VI_VERBOSE)

    Display additional debugging information

=item --version

    Display version information for the script

=back

=head1 BUGS

    Known Bugs:

=over

=item * There is a lot of anal sex happening at my desk

=back

=head1 FILES

    SDK uses the default ~/.visdkrc for storing enviromental values.
    Further information can be found on: https://supportwiki.balabit/doku.php/products:vmware:infra_info

=head1 AUTHOR

    Krisztian Banhidy <s4mur4i@balabit.hu>

=cut
